!function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";var o,n;i.r(e);class r{constructor(t,e,i){o.add(this);const r=n.call(this,t,e,i);this.x=r.x,this.y=r.y,this.z=r.z}equals(t,e,i){const o=n.call(this,t,e,i);return this.x===o.x&&this.y===o.y&&this.z===o.z}add(t,e,i,o){let r=n.call(this,t,e,i);return this.x+=o?r.x*o:r.x,this.y+=o?r.y*o:r.y,this.z+=o?r.z*o:r.z,this}addScalar(t){if("number"!=typeof t)throw new Error("Invalid scalar");return this.x+=t,this.y+=t,this.z+=t,this}sub(t,e,i,o){const r=n.call(this,t,e,i);return this.x-=o?r.x*o:r.x,this.y-=o?r.y*o:r.y,this.z-=o?r.z*o:r.z,this}subScalar(t){if("number"!=typeof t)throw new Error("Invalid scalar");return this.x-=t,this.y-=t,this.z-=t,this}multiply(t,e,i){const o=n.call(this,t,e,i);return this.x*=o.x,this.y*=o.y,this.z*=o.z,this}multiplyScalar(t){if("number"!=typeof t)throw new Error("Invalid scalar");return this.x*=t,this.y*=t,this.z*=t,this}divide(t,e,i){const o=n.call(this,t,e,i);return this.x/=o.x,this.y/=o.y,this.z/=o.z,this}divideScalar(t){if("number"!=typeof t)throw new Error("Invalid scalar");return this.x/=t,this.y/=t,this.z/=t,this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}getCenter(t,e,i){const o=n.call(this,t,e,i);return new r((this.x+o.x)/2,(this.y+o.y)/2,(this.z+o.z)/2)}getDistance(t,e,i){const[o,n,r]=t instanceof Array?t:"object"==typeof t?[t.x,t.y,t.z]:[t,e,i];if("number"!=typeof o||"number"!=typeof n||"number"!=typeof r)throw new Error("Invalid vector coordinates");const[s,l,a]=[this.x-o,this.y-n,this.z-r];return Math.sqrt(s*s+l*l+a*a)}toArray(t){return"number"==typeof t?[parseFloat(this.x.toFixed(t)),parseFloat(this.y.toFixed(t)),parseFloat(this.z.toFixed(t))]:[this.x,this.y,this.z]}toJSON(t){return"number"==typeof t?{x:parseFloat(this.x.toFixed(t)),y:parseFloat(this.y.toFixed(t)),z:parseFloat(this.z.toFixed(t))}:{x:this.x,y:this.y,z:this.z}}toString(t){return JSON.stringify(this.toJSON(t))}}o=new WeakSet,n=function(t,e,i){let o={x:0,y:0,z:0};if(o=t instanceof r?t:t instanceof Array?{x:t[0],y:t[1],z:t[2]}:"object"==typeof t?t:{x:t,y:e,z:i},"number"!=typeof o.x||"number"!=typeof o.y||"number"!=typeof o.z)throw new Error("Invalid vector coordinates");return o};const s=r;var l={warning:1,log:2,error:3,debug:4},a="function"==typeof GetConvar?GetConvar(`${GetCurrentResourceName()}_logLevel`,""):"",d="function"==typeof GetConvar?GetConvar("sv_loglevel","warning"):"warning";d=(null==a?void 0:a.length)>0?a:d,(()=>{if(!l[d])throw new Error(`Invalid log level: ${d}`)})();const c=(t,...e)=>{console.log(`^2[D] ${t}`,...e,"^0")},u=(t,...e)=>{switch(t){case"coord":{const[t,i,o]=e;return AddBlipForCoord(t,i,o)}case"area":{const[t,i,o,n,r]=e;return AddBlipForArea(t,i,o,n,r)}case"radius":{const[t,i,o,n]=e;return AddBlipForRadius(t,i,o,n)}case"pickup":{const[t]=e;return AddBlipForPickup(t)}case"entity":{const[t]=e;return AddBlipForEntity(t)}default:return console.error(new Error("Invalid Blip Type")),0}},h=(t,e,i,o,n,r,s,l)=>{"number"==typeof i&&SetBlipSprite(t,i),"number"==typeof o&&SetBlipColour(t,o),"number"==typeof n&&SetBlipAlpha(t,n),"number"==typeof r&&SetBlipScale(t,r),"boolean"==typeof s&&SetBlipRoute(t,s),"boolean"==typeof l&&SetBlipAsShortRange(t,l),"string"==typeof e&&(BeginTextCommandSetBlipName("STRING"),AddTextComponentString(e),EndTextCommandSetBlipName(t))};let v=void 0,y=void 0,p=void 0,f=void 0,m=void 0;async function b(){const t=t=>{var e,i,o;const n=v.settings.location,r=null===(e=null==v?void 0:v.settings)||void 0===e?void 0:e.blip,l=null!==(i=null==r?void 0:r.type)&&void 0!==i?i:"coord",a=null===(o=null==r?void 0:r.delete)||void 0===o||o;r&&(m=u(l,n.x,n.y,n.z,n.r),setTimeout(()=>{var t,e,i,o,n;h(m,null!==(t=r.text)&&void 0!==t?t:"Location",null!==(e=r.sprite)&&void 0!==e?e:1,null!==(i=r.color)&&void 0!==i?i:1,null!==(o=r.alpha)&&void 0!==o?o:255,null!==(n=r.scale)&&void 0!==n?n:void 0,!0,!1)},1e3));let d=setInterval(()=>{if(!v||!(null==v?void 0:v.settings))return void clearInterval(d);const e=GetEntityCoords(PlayerPedId());new s(e).getDistance(n)<=v.settings.distance&&(emitNet("vrp:jobs:objectiveCompleted",v.id),a&&(RemoveBlip(m),m=void 0),t&&emitNet(t,v),clearInterval(d),v=void 0)},250)},e=t=>{if(t)clearTick(p),p=void 0;else{if(void 0!==p)return;p=setTick(()=>{DisableControlAction(0,v.settings.key,!0),IsDisabledControlJustPressed(0,v.settings.key)&&(emitNet("vrp:jobs:objectiveCompleted",v.id),v.settings.event&&emitNet(v.settings.event,v),clearTick(p),clearInterval(f),p=void 0,f=void 0,globalThis.exports["vrp-ui"].hideInteraction(),v=void 0)})}};onNet("vrp:jobs:startTask",i=>{i.type&&(v=i,"destination"===(null==i?void 0:i.type)&&t(),"customEvent"===(null==i?void 0:i.type)&&t(i.settings.event),"askForeman"===(null==i?void 0:i.type)&&(f=setInterval(()=>{const t=GetEntityCoords(PlayerPedId());new s(t).getDistance(v.settings.location)<=v.settings.distance?(globalThis.exports["vrp-ui"].showInteraction(v.settings.text),e(!1)):(globalThis.exports["vrp-ui"].hideInteraction(),e(!0))},250)))}),onNet("vrp:jobs:activityCompleted",()=>{RemoveBlip(m),clearTick(p),clearInterval(f),p=void 0,f=void 0,v=void 0,m=void 0}),on("baseevents:enteredVehicle",t=>{c("enteredVehicle"),y=t;const e=GetDisplayNameFromVehicleModel(GetEntityModel(t));"getVehicle"===(null==v?void 0:v.type)&&(c("[vrp-jobs] Get Vehicle Task",e,v.settings.model),e.toLowerCase()===v.settings.model&&(c("[vrp-jobs] Get Vehicle Task Compeleted. Cleaning Up!!!"),emitNet("vrp:jobs:objectiveCompleted",v.id,v),v=void 0))}),on("baseevents:leftVehicle",()=>{const t=GetDisplayNameFromVehicleModel(GetEntityModel(y));"leaveVehicle"===(null==v?void 0:v.type)&&t.toLowerCase()===v.settings.model&&(emitNet("vrp:jobs:objectiveCompleted",v.id,v),v.settings.event&&emitNet(v.settings.event,v,NetworkGetNetworkIdFromEntity(y)))}),onNet("inventory:playerInventoryChanged",async(t,e,i)=>{if("loadCargo"!==(null==v?void 0:v.type))return;if(t!==v.settings.toInvnetory||v.settings.itemId!==i.itemId)return void c("[vrp-jobs] The Inventory Name Or Item Name Dose Not Match",v.settings.toInvnetory,t,v.settings.itemId,i.itemId);const[o,n]=await RPC.execute("inventory:hasItemInInventory",[`${v.settings.toInvnetory}`],{itemId:v.settings.itemId});if(o){if(c("[vrp-jobs] Total Item In Inventory",n),n>=v.settings.cargo)return emitNet("vrp:jobs:objectiveCompleted",v.id),void(v=void 0);emitNet("vrp:jobs:updateObjective",v.id,n)}else c("[vrp-jobs] This Inventory Dont Have This Item")})}const x=GetCurrentResourceName();on("onClientResourceStart",async t=>{t===x&&await b()})}]);